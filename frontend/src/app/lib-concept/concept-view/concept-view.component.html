@if (isLoadStream) {
  <app-spinner isFillParent></app-spinner>
}
  
<!-- <div class="cv-side-bar cv-side-lf"> -->
  <!-- <button class="cv-btn-arrow cv-left" (click)="isSidebarLfOpen = !isSidebarLfOpen;">
    <svg [ngClass]="['cv-arrow cv-rotate', (isSidebarLfOpen ? 'cv-0deg' : 'cv-180deg')]">
      <use href="assets/icons/lib-concept/concept-view/angle-left-bin.svg#angle-left-bin"></use>
    </svg>
  </button> -->

  <!-- <app-sidebar [isOpen]="isSidebarLfOpen">
    <aside class="cv-aside cv-pg-lf-0" style="outline: 1px dashed blueviolet; height: 100%;">
      cv-bar-left -->
  <!-- <app-panel-left-followers
    [isMiniSize]="!isSidebarLfOpen"
    [isLoading]="followersService.followersAndPopularLoading"
    [followerList]="followersService.followerDTOList"
    [popularList]="followersService.popularDTOList"
  >
    <div class="ticker" [appTradMarketOverview]="{ isDarkTheme: isDarkTheme }">
    </div>
  </app-panel-left-followers> -->

    <!-- </aside>
  </app-sidebar> -->
<!-- </div> -->

<app-sidebar class="cv-sidebar"
    [mode]="'left'"
    appSidebarHandler
    [sidebarHandlerOwner]="hostRef.nativeElement"
    [sidebarHandlerIfScroll]="true">
    <div class="cv-sdb-cover-lf">
      <div class="cv-sdb-box-lf">
        bar-left 1 bar-left 2
      </div>
    </div>
</app-sidebar>

<div class="cv-center">
  
  <div [ngClass]="[(isStreamVideo ? 'cv-cnt-video' : '')]">
  <!-- <div [ngClass]="['cv-box-video', classNameViewerSize()]"> -->
    <!-- <div class="height-100ps" [appMillicastViewer]="millicastViewer"></div> -->
    <div class="cv-hg100"></div>
    <app-panel-stream-state class="cv-stream-state"
      [streamState]="streamDto?.state || null">
    </app-panel-stream-state>
  <!-- </div> -->
  </div>

  <div cv-pd-tp0_5></div>

  <div class="cv-cnt-footer">

    <div class="cv-flex-wrap">
      <span>
        <span cv-mr-rg1>{{ 'concept-view.title' | translate }}</span>
        <span class="cv-cnt-ft-title">{{ streamDto?.title }}</span>
      </span>  
    </div>

    <div class="cv-cnt-params">
        
      <div class="cv-flex cv-prm" style="outline: 1px dashed cadetblue;">
        <app-avatar cv-mr-rg-0_5 class="cv-psp-avatar"
          [avatar]="avatar">
        </app-avatar>
        <div class="cv-cnt-ft-prm-name">
          <div>{{ nickname }}</div>
          <div class="cv-psp-flex-wrap">
            <span cv-mr-rg-0_5>{{ 'Tags:' | translate }}</span>
            @for (tag of (streamDto?.tags || []); track tag) {
              <span cv-mr-rg-0_5>#{{ tag }}</span>
            }
          </div>
        </div>
      </div>

      <div class="cv-flex-wrap9 cv-prm" style="outline: 1px dashed orangered;">
      <app-panel-stream-params class="cv-params9"
        [countOfViewer]="countOfViewer"
        [isShowTimer]="isShowTimer"
        [locale]="localeService.getLocale()"
        [start]="getDate(streamDto?.starttime)"
        [started]="getDate(streamDto?.started)"
        [stopped]="getDate(streamDto?.stopped)">
      </app-panel-stream-params>
      </div>

      <div class="cv-flex-wrap9 cv-prm" style="outline: 1px dashed green;">
      <!-- <div cv-mr-tp-0_5 class="cv-actions"> -->
      @if (isStreamOwner) {
        <app-panel-stream-actions class="" 
          [state]="streamDto?.state"
          [title]="streamDto?.title"
          (changeState)="doChangeState($event)">
        </app-panel-stream-actions>
      }
      <!-- </div> -->
      </div>

    </div>

  </div>
    
  @if (!isStreamOwner) {
    Is not Stream Owner
    <!-- @if (subscribeLoading) {
    <app-spinner [isFullOwner]="true" [diameter]="60"></app-spinner>
    }
    <app-panel-stream-info
      [streamDTO]="streamDTO"
      [extendedUserDTO]="extendedUserDTO"
      [hasSubscribe]="hasSubscriptionToAuthor"
      [countOfViewer]="socketService.countOfViewer$ | async"
      [broadcastDuration]="broadcastDuration"
      (actionSubscribe)="doActionSubscribe($event)">
    </app-panel-stream-info> -->
  } @else {
    <!-- <div class="cv-stream-info">
      <app-panel-stream-admin
        countOfViewer9="socketService.countOfViewer$ | async"
        [countOfViewer]="0"
        [state]="streamDto?.state"
        [startDate]="getDate(streamDto?.starttime)"
        [title]="streamDto?.title"
        (changeState)="doChangeState($event)">
      </app-panel-stream-admin>
    </div> -->
  }
  <!-- <div class="user-portfolio">
    <app-panel-portfolio-schedule class="details"
      [isDarkTheme]="isDarkTheme"
      [queryParamMap]="route.queryParamMap | async"
      [userId]="streamDTO?.userId || null"
    ></app-panel-portfolio-schedule>
  </div> -->
</div>

<app-sidebar class="cv-sidebar"
  [mode]="'right'"
  appSidebarHandler
  [sidebarHandlerOwner]="hostRef.nativeElement"
  [sidebarHandlerIfScroll]="true">
  <div class="cv-sdb-cover-rg">
    <div class="cv-sdb-box-rg">
      chat 1 chat 2 chat 3
    </div>
  </div>
  <!-- <div style="outline: 1px dashed blueviolet; height: 100%;">
      <p>app-panel-chat 1</p>
      <p>app-panel-chat 2</p>
  </div> -->
  <!-- <app-panel-chat class="cv-aside cv-pg-rg0"
    [isBlocked]="false"
    [isEditable]="isStreamActive"
    [locale]="localeService.getLocale()"
    [nickname]="nickname || ''"
    [title]="'concept-view.chat_title'">
  </app-panel-chat> -->
</app-sidebar>


<!--<div class="cv-side-bar cv-side-rg">
  <button class="cv-btn-arrow cv-right" (click)="isSidebar RgOpen = !isSidebar RgOpen;">
    <svg [ngClass]="['cv-arrow cv-rotate', (isSidebar RgOpen ? 'cv-0deg' : 'cv-180deg')]">
      <use href="assets/icons/lib-concept/concept-view/angle-right-bin.svg#angle-right-bin"></use>
    </svg>
  </button>
    
  <app-sidebar [isOpen]="isSidebar RgOpen" (clickByVeil)="isSidebar RgOpen=true">
      <app-panel-chat class="cv-aside cv-pg-rg0"
        [isBlocked]="false"
        [isEditable]="isStreamActive"
        [locale]="localeService.getLocale()"
        [nickname]="nickname || ''"
        [title]="'concept-view.chat_title'">
      </app-panel-chat>
    < !-- <app-panel-right-chat
    [isEditable]="isStreamActive"
    [userId]="profileService.getUserId()"
    [chatMessages]="chatMessages"
    [isStreamOwner]="isStreamOwner"
    [isUserBanned]="isUserBanned || (socketService.userBanned$ | async)"
    (sendMessage)="doSendMessage($event)"
    (removeMessage)="doRemoveMessage($event)"
    (editMessage)="doEditMessage($event)"
    (bannedUser)="doBannedUser($event)"
  ></app-panel-right-chat> -- >
    
  </app-sidebar>
</div>-->
