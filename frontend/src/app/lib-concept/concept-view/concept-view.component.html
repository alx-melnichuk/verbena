@if (isLoadStream) {
  <app-spinner isFillParent></app-spinner>
}
  
<div class="cv-side-bar cv-side-lf">
  <button class="cv-btn-arrow cv-left" (click)="isSidebarLfOpen = !isSidebarLfOpen;">
    <svg [ngClass]="['cv-arrow cv-rotate', (isSidebarLfOpen ? 'cv-0deg' : 'cv-180deg')]">
      <use href="assets/icons/lib-concept/concept-view/angle-left-bin.svg#angle-left-bin"></use>
    </svg>
  </button>

  <app-sidebar [isOpen]="isSidebarLfOpen" (clickByVeil)="isSidebarLfOpen=true">
    <aside class="cv-aside cv-pg-lf-0" style="outline: 1px dashed blueviolet; height: 100%;">
      cv-bar-left
  <!-- <app-panel-left-followers
    [isMiniSize]="!isSidebarLfOpen"
    [isLoading]="followersService.followersAndPopularLoading"
    [followerList]="followersService.followerDTOList"
    [popularList]="followersService.popularDTOList"
  >
    <div class="ticker" [appTradMarketOverview]="{ isDarkTheme: isDarkTheme }">
    </div>
  </app-panel-left-followers> -->
    </aside>
  </app-sidebar>
</div>

<div class="cv-center">
  
  <div class="cv-cnt-video-wrap">
    <div [ngClass]="[(isStreamVideo ? 'cv-cnt-video' : '')]">
    <!-- <div [ngClass]="['cv-box-video', classNameViewerSize()]"> -->
      <!-- <div class="height-100ps" [appMillicastViewer]="millicastViewer"></div> -->
      <div class="cv-hg100"></div>
      <app-panel-stream-state class="cv-stream-state"
        [streamState]="streamDto?.state || null">
      </app-panel-stream-state>
    <!-- </div> -->
    </div>
  </div>

  <div class="cv-cnt-footer-wrap">
    <div class="cv-cnt-footer">
      <div class="cv-flex">
        <span>
          <span class="cv-title">{{ 'concept-view.title' | translate }}</span>
          <span class="cv-value">{{ streamDto?.title }}</span>
        </span>  
      </div>
      <div class="cv-flex cv-wrap">
        <app-panel-stream-params class="cv-params"  style="outline: 1px dashed orangered;"
          [avatar]="avatar"
          [locale]="localeService.getLocale()"
          [nickname]="nickname"
          [tags]="streamDto?.tags || []"
          [isShowTimer]="isShowTimer"
          [startDateTime]="getDate(streamDto?.starttime)">
        </app-panel-stream-params>
      
        <div cv-mr-tp-0_5 class="cv-actions" style="outline: 1px dashed green;">
          @if (isStreamOwner) {
            <app-panel-stream-actions class="cv-wrap"
              [state]="streamDto?.state"
              [title]="streamDto?.title"
              (changeState)="doChangeState($event)">
            </app-panel-stream-actions>
          }
        </div>
      </div>
    </div>
  </div>
    
  @if (!isStreamOwner) {
    Is not Stream Owner
    <!-- @if (subscribeLoading) {
    <app-spinner [isFullOwner]="true" [diameter]="60"></app-spinner>
    }
    <app-panel-stream-info
      [streamDTO]="streamDTO"
      [extendedUserDTO]="extendedUserDTO"
      [hasSubscribe]="hasSubscriptionToAuthor"
      [countOfViewer]="socketService.countOfViewer$ | async"
      [broadcastDuration]="broadcastDuration"
      (actionSubscribe)="doActionSubscribe($event)">
    </app-panel-stream-info> -->
  } @else {
    <!-- <div class="cv-stream-info">
      <app-panel-stream-admin
        countOfViewer9="socketService.countOfViewer$ | async"
        [countOfViewer]="0"
        [state]="streamDto?.state"
        [startDate]="getDate(streamDto?.starttime)"
        [title]="streamDto?.title"
        (changeState)="doChangeState($event)">
      </app-panel-stream-admin>
    </div> -->
  }
  <!-- <div class="user-portfolio">
    <app-panel-portfolio-schedule class="details"
      [isDarkTheme]="isDarkTheme"
      [queryParamMap]="route.queryParamMap | async"
      [userId]="streamDTO?.userId || null"
    ></app-panel-portfolio-schedule>
  </div> -->
</div>


<div class="cv-sidebar-wrap">
  <app-sidebar
    [isAboveParent]="!isSidebarRgOpen"
    [isOpen]="isSidebarRgOpen"
    (clickByVeil)="isSidebarRgOpen=true">
    <app-panel-chat class="cv-aside cv-pg-rg0"
      [isBlocked]="false"
      [isEditable]="isStreamActive"
      [locale]="localeService.getLocale()"
      [nickname]="nickname || ''"
      [title]="'concept-view.chat_title'">
    </app-panel-chat>
  </app-sidebar>
</div>

<!--<div class="cv-side-bar cv-side-rg">
  <button class="cv-btn-arrow cv-right" (click)="isSidebarRgOpen = !isSidebarRgOpen;">
    <svg [ngClass]="['cv-arrow cv-rotate', (isSidebarRgOpen ? 'cv-0deg' : 'cv-180deg')]">
      <use href="assets/icons/lib-concept/concept-view/angle-right-bin.svg#angle-right-bin"></use>
    </svg>
  </button>
    
  <app-sidebar [isOpen]="isSidebarRgOpen" (clickByVeil)="isSidebarRgOpen=true">
      <app-panel-chat class="cv-aside cv-pg-rg0"
        [isBlocked]="false"
        [isEditable]="isStreamActive"
        [locale]="localeService.getLocale()"
        [nickname]="nickname || ''"
        [title]="'concept-view.chat_title'">
      </app-panel-chat>
    < !-- <app-panel-right-chat
    [isEditable]="isStreamActive"
    [userId]="profileService.getUserId()"
    [chatMessages]="chatMessages"
    [isStreamOwner]="isStreamOwner"
    [isUserBanned]="isUserBanned || (socketService.userBanned$ | async)"
    (sendMessage)="doSendMessage($event)"
    (removeMessage)="doRemoveMessage($event)"
    (editMessage)="doEditMessage($event)"
    (bannedUser)="doBannedUser($event)"
  ></app-panel-right-chat> -- >
    
  </app-sidebar>
</div>-->
