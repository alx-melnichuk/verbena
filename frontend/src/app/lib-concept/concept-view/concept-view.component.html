<!-- @if (streamStateService.changeOfState) {
  <app-spinner [isFullOwner]="true"></app-spinner>
} -->

<app-sidebar class="cv-side-bar cv-brd-rg" [isOpen]="isSidebarLeftOpen">
  <button class="cv-btn-arrow cv-left" (click)="isSidebarLeftOpen = !isSidebarLeftOpen;">
    <svg [ngClass]="['cv-arrow cv-rotate', (isSidebarLeftOpen ? 'cv-0deg' : 'cv-180deg')]">
      <use href="assets/icons/lib-chat/panel-chat/angle-left-bin.svg#angle-left-bin"></use>
    </svg>
  </button>
  <aside class="cv-aside">
    cv-bar-left
  <!-- <app-panel-left-followers
    [isMiniSize]="isMiniSidebarLeft"
    [isLoading]="followersService.followersAndPopularLoading"
    [followerList]="followersService.followerDTOList"
    [popularList]="followersService.popularDTOList"
  >
    <div class="ticker" [appTradMarketOverview]="{ isDarkTheme: isDarkTheme }">
    </div>
  </app-panel-left-followers> -->
  </aside>
</app-sidebar>

<div class="cv-center">
  
  <div [ngClass]="[(isStreamVideo ? 'cv-stream-video' : '')]">
    <!-- <div [ngClass]="['cv-box-video', classNameViewerSize()]"> -->
      <!-- <div class="height-100ps" [appMillicastViewer]="millicastViewer"></div> -->
      <div class="cv-hg100"></div>
      <app-panel-stream-state class="cv-stream-state"
        [streamState]="streamDto?.state || null">
      </app-panel-stream-state>
    <!-- </div> -->
  </div>

  <div class="cv-stream-panel">
    
    <app-panel-stream-params style9="outline: 1px dashed darkblue;"
      [title]="streamDto?.title"
      [tags]="streamDto?.tags || []"
      [startDateTime]="getDate(streamDto?.starttime)">
    </app-panel-stream-params>
    
    <div class="cv-stream-tools">
      stream-tools
    </div>
    <div class="cv-stream-actions">
      @if (isStreamOwner) {
        <app-panel-stream-actions
          [state]="streamDto?.state"
          [title]="streamDto?.title"
          (changeState)="doChangeState($event)">
        </app-panel-stream-actions>
      }
    </div>
  </div>
  @if (!isStreamOwner) {
    Is not Stream Owner
    <!-- @if (subscribeLoading) {
    <app-spinner [isFullOwner]="true" [diameter]="60"></app-spinner>
    }
    <app-panel-stream-info
      [streamDTO]="streamDTO"
      [extendedUserDTO]="extendedUserDTO"
      [hasSubscribe]="hasSubscriptionToAuthor"
      [countOfViewer]="socketService.countOfViewer$ | async"
      [broadcastDuration]="broadcastDuration"
      (actionSubscribe)="doActionSubscribe($event)">
    </app-panel-stream-info> -->
  } @else {
    <!-- <div class="cv-stream-info">
      <app-panel-stream-admin
        countOfViewer9="socketService.countOfViewer$ | async"
        [countOfViewer]="0"
        [state]="streamDto?.state"
        [startDate]="getDate(streamDto?.starttime)"
        [title]="streamDto?.title"
        (changeState)="doChangeState($event)">
      </app-panel-stream-admin>
    </div> -->
  }

  <!-- <div class="user-portfolio">
    <app-panel-portfolio-schedule class="details"
      [isDarkTheme]="isDarkTheme"
      [queryParamMap]="route.queryParamMap | async"
      [userId]="streamDTO?.userId || null"
    ></app-panel-portfolio-schedule>
  </div> -->
</div>

<app-sidebar class="cv-side-bar cv-brd-lf" [isOpen]="isSidebarRightOpen">
  <button class="cv-btn-arrow cv-right" (click)="isSidebarRightOpen = !isSidebarRightOpen;">
    <svg [ngClass]="['cv-arrow cv-rotate', (isSidebarRightOpen ? 'cv-0deg' : 'cv-180deg')]">
      <use href="assets/icons/lib-chat/panel-chat/angle-right-bin.svg#angle-right-bin"></use>
    </svg>
  </button>
  <aside class="cv-aside">
    <app-panel-chat
    ></app-panel-chat>
  <!-- <app-panel-right-chat
    [isEditable]="isEditableChat"
    [userId]="profileService.getUserId()"
    [chatMessages]="chatMessages"
    [isStreamOwner]="isStreamOwner"
    [isUserBanned]="isUserBanned || (socketService.userBanned$ | async)"
    (sendMessage)="doSendMessage($event)"
    (removeMessage)="doRemoveMessage($event)"
    (editMessage)="doEditMessage($event)"
    (bannedUser)="doBannedUser($event)"
  ></app-panel-right-chat> -->
  </aside>
</app-sidebar>
