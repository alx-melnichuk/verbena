<div class="pse-panel">
  <div class="pse-content pse-over-auto global-scroll">

    <form [formGroup]="formGroup" novalidate>
        
      <div class="pse-text">{{ 'stream_edit.caption' | translate }}</div>

      <mat-form-field wd-100 appearance="outline" color="primary" class="pse-title">
        <mat-label>{{ 'stream_edit.title' | translate }}</mat-label>
        <input matInput
          type="text"
          formControlName="title"
          [required]="isCreate"
          [attr.maxlength]="(maxLenTitle > 0 ? maxLenTitle + 1 : null)"
          autocomplete="off"
        />
        <mat-error>{{ getErrorMsg(controls.title.errors, 'title') | translate : controls.title.errors }}</mat-error>
      </mat-form-field>

      <app-field-descript wd-100 mr-tp-025
        formControlName="descript"
        [isRequired]="false"
        label="stream_edit.descript">
      </app-field-descript>

      <div class="pse-text">{{ 'stream_edit.thumbnail' | translate }}</div>

      <div class="pse-logo">
        <app-field-file-upload hg-100 class="pse-file-upload" *ngIf="!addedLogoView"
          [maxFileSize]="maxFileSize"
          [validFileTypes]="validFileTypes"
          (addFile)="addFile($event)"
          (readFile)="readFile($event)">
        </app-field-file-upload>
        <div *ngIf="!!addedLogoView" class="pse-logo-image">
          <img class="pse-image-view" [src]="addedLogoView" alt="logo unavailable">
          <button class="pse-delete-logo" (click)="deleteFileLogo()">
            <span class="pse-delete-box"></span>
          </button>
        </div>
      </div>

      <div class="pse-text">{{ 'stream_edit.tags' | translate }}</div>

      <app-field-chip-grid wd-100
        formControlName="tags"
        [label]="'stream_edit.add_tags'"
        [isReadonly]="(controls.tags.value || '').length == tagMaxAmount ? true : null"
        [isRequired]="true"
        [isRemovable]="isTagRemovable"
        [minLength]="tagMinLength"
        [maxLength]="tagMaxLength"
        [minAmount]="tagMinAmount"
        [maxAmount]="tagMaxAmount"
        [separatorCodes]="separatorCodes"
        [hint]="'stream_edit.tags_hint'"
      >
      </app-field-chip-grid>

      <div class="pse-start-date-time-label">
        <span class="pse-text">{{ 'stream_edit.set_date_and_time_or_now' | translate }}</span>
        <mat-slide-toggle class="pse-toggle"
          color="primary"
          formControlName="isStartTime"
          (change)="changeIsStartTime()">
        </mat-slide-toggle>
      </div>

      <div class="pse-start-date-time">
        
        <mat-form-field appearance="outline" color="primary">
          <mat-label>{{ 'stream_edit.start_date' | translate }}</mat-label>
          <input matInput formControlName="startDate"
            [matDatepicker]="datepickerStartDate"
          />
          <mat-datepicker-toggle matSuffix [for]="datepickerStartDate"></mat-datepicker-toggle>
          <mat-datepicker #datepickerStartDate></mat-datepicker>
        </mat-form-field>

        <app-field-time class="pse-start-time"
          formControlName="startTime"
          [isRequired]="true">
        </app-field-time>
      </div>

      <ng-container *ngIf="!isCreate">
        <div class="">
          <div class="pse-text">{{ 'stream_edit.link_for_visitors' | translate }}</div>
        </div>
        <div class="pse-link-param">
          <div class="pse-ellipsis">
            <span>{{ linkForVisitors }}</span>
          </div>
          <div class="pse-icon pse-copy"
            [matTooltip]="'stream_edit.copy_stream_link_to_clipboard' | translate"
            matTooltipPosition="above"
            (click)="doCopyToClipboard(linkForVisitors)"
          ></div>
        </div>
      </ng-container>

    </form>

  </div>

  <div class="pse-actions">
    <button mat-raised-button color="primary"
      class="app-infix app-ordinary"
      [disabled]="formGroup.pristine || formGroup.invalid"
      (click)="saveStreamCard()">
      <span class="pse-actions-label">
        <i class="pse-save"></i>
        {{ (isCreate ? 'stream_edit.go_public' : 'stream_edit.save') | translate }}
      </span>
    </button>
  </div>
</div>
