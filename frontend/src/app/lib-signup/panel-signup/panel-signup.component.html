<div class="ps-content">
  <form novalidate class="ps-form"
    [formGroup]="formGroup">

    <div class="ps-title">{{ 'panel-signup.title' | translate }}</div>
  
    <app-uniqueness-check ps-mr-tp-0_5
      #uniquenessCheckNickname="appUniquenessCheck"
      [debounceDelay]="debounceDelay"
      [checkUniquenessFn]="checkUniquenessNickname">
      <app-field-input wd100
        formControlName="nickname"
        gist="nickname"
        [isRequired]="true"
        label="field-input.nickname_label"
        hint="field-input.nickname_hint"
        [maxLen]="nicknameMaxLen"
        [minLen]="nicknameMinLen"
        [pattern]="nicknamePattern"
        type="text"
        [errorMsg]="uniquenessCheckNickname.isUniquenessError ? 'Conflict.nickname_already_use' : undefined"
        (input)="updateErrMsg(); uniquenessCheckNickname.checkParameter(controls.nickname.value);">
      </app-field-input>
    </app-uniqueness-check>

    
    <app-uniqueness-check ps-mr-tp-1
      #uniquenessCheckEmail="appUniquenessCheck"
      [debounceDelay]="debounceDelay"
      [checkUniquenessFn]="checkUniquenessEmail">
      <app-field-input wd100
        formControlName="email"
        gist="email"
        [isRequired]="true"
        label="field-input.email_label"
        [maxLen]="emailMaxLen"
        [minLen]="emailMinLen"
        type="email"
        [errorMsg]="uniquenessCheckEmail.isUniquenessError ? 'Conflict.email_already_use' : undefined"
        (input)="updateErrMsg(); uniquenessCheckEmail.checkParameter(controls.email.value);">
      </app-field-input>
    </app-uniqueness-check>

    <app-field-password wd100 ps-mr-tp-1
      formControlName="password"
      [isRequired]="true"
      hint="field-password.password_hint"
      (input)="updateErrMsg()">
    </app-field-password>
  
    <button mat-flat-button ps-mr-tp-1
      class="mat-primary"
      [disabled]="formGroup.invalid || isDisabledSubmit ? '' : undefined"
      (click)="doSignup()">
      {{ 'panel-signup.button_signup' | translate }}
    </button>
  
    <div ps-mr-tp-1 class="ps-note">
      <span>{{ 'panel-signup.already_registered' | translate }}</span>
      <a ps-mr-lf-0_5 no-decor routerLink="{{linkLogin}}">{{ 'panel-signup.go_to_login_page' | translate }}</a>
    </div>
  </form>

  <div class="mat-mdc-form-field-subscript-wrapper">
    @for (errMsg of errMsgs; track errMsg) {
      <mat-error>{{ errMsg | translate }}</mat-error>
    } 
  </div>
</div>
